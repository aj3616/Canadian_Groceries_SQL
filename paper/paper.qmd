---
title: ""
subtitle: "My subtitle if needed"
author: 
  - First author
  - Another author
thanks: "Code and data are available at: https://github.com/aj3616/Canadian_Groceries_SQL/tree/main"
date: today
date-format: long
abstract: "First sentence. Second sentence. Third sentence. Fourth sentence."
format: pdf
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

library(tidyverse)
library(ggplot2)
library(gt)
```

# Introduction

Overview paragraph

Estimand paragraph

Results paragraph

Why it matters paragraph

Telegraphing paragraph: The remainder of this paper is structured as follows. @sec-data....

# Data {#sec-data}

## Overview

We use the statistical programming language R [@citeR].... Our data [@filipp2024hammer].... Following @tellingstories, we consider...

Overview text

## Measurement

Some paragraphs about how we go from a phenomena in the world to an entry in the dataset.

## Outcome variables

Some of our data is of penguins (@fig-bills), from @palmerpenguins.

```{r}

```

Talk more about it.

And also planes (@fig-planes). (You can change the height and width, but don't worry about doing that until you have finished every other aspect of the paper - Quarto will try to make it look nice and the defaults usually work well once you have enough text.)

```{r}
#| label: fig-planes
#| fig-cap: Relationship between wing length and width
#| echo: false
#| warning: false
#| message: false

analysis_data <- read_csv(here::here("data/02-analysis_data/analysis_data.csv"))

analysis_data |> 
  ggplot(aes(x = width, y = length)) +
  geom_point(alpha = 0.8) +
  theme_minimal() +
  labs(x = "Wing width (mm)",
       y = "Wing length (mm)")
```

Talk way more about it.

## Predictor variables

Add graphs, tables and text.

Use sub-sub-headings for each outcome variable and feel free to combine a few into one if they go together naturally.

# Model

The goal of our modelling strategy is twofold. Firstly,...

Here we briefly describe the Bayesian analysis model used to investigate... Background details and diagnostics are included in [Appendix -@sec-model-details].

## Model set-up

Define $y_i$ as the number of seconds that the plane remained aloft. Then $\beta_i$ is the wing width and $\gamma_i$ is the wing length, both measured in millimeters.

```{=tex}
\begin{align} 
y_i|\mu_i, \sigma &\sim \mbox{Normal}(\mu_i, \sigma) \\
\mu_i &= \alpha + \beta_i + \gamma_i\\
\alpha &\sim \mbox{Normal}(0, 2.5) \\
\beta &\sim \mbox{Normal}(0, 2.5) \\
\gamma &\sim \mbox{Normal}(0, 2.5) \\
\sigma &\sim \mbox{Exponential}(1)
\end{align}
```
We run the model in R [@citeR] using the `rstanarm` package of @rstanarm. We use the default priors from `rstanarm`.

### Model justification

We expect a positive relationship between the size of the wings and time spent aloft. In particular...

We can use maths by including latex between dollar signs, for instance $\theta$.

# Results

The chart @fig-avgprice demonstrate average price for bread among different vendors This show that Walmart is the vendor of highest price of bread.

```{r}
#| label: fig-avgprice
#| fig-cap: Average Price for Bread amoung different vender. This show that Walmart is the vendor of highest price of bread.
#| echo: false
#| warning: false
#| message: false
 
brand_price <- read_csv("~/Canadian_Groceries_SQL/data/02-analysis_data/temp.vendor_summary.csv")

ggplot(brand_price, aes(x = vendor, y = overall_avg_price, fill = vendor)) +
  geom_bar(stat = "identity") +
  geom_text(aes(label = round(overall_avg_price, 2)), vjust = -0.5) +  
  labs(x = "Vendor", y = "Average Price for Bread") +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
  scale_fill_brewer(palette = "Set3") 
```

Our results are summarized in @tbl-modelresults.

```{r}
#| echo: false
#| eval: true
#| label: tbl-vendor_summary
#| tbl-cap: "Vendor Summary-Overall Average Price and Unit Price by Vendor"
#| warning: false



# Load the data
vendor_summary <- read_csv("data/02-analysis_data/temp.vendor_summary.csv")

# Create a formatted table
vendor_summary_table <- vendor_summary %>%
  gt() %>%
  cols_label(
    vendor = "Vendor",
    overall_avg_price = "Average Price ($)",
    overall_avg_unit_price = "Average Unit Price ($)"
  ) %>%
  fmt_number(
    columns = c(overall_avg_price, overall_avg_unit_price),
    decimals = 2
  ) %>%
  tab_style(
    style = cell_text(weight = "bold"),
    locations = cells_column_labels(columns = everything())
  ) %>%
  tab_source_note(
    source_note = "Data source: data/02-analysis_data/temp.vendor_summary.csv"
  )

# Print the table
vendor_summary_table

```

# Discussion

## First discussion point {#sec-first-point}

If my paper were 10 pages, then should be be at least 2.5 pages. The discussion is a chance to show off what you know and what you learnt from all this.

## Second discussion point

Please don't use these as sub-heading labels - change them to be what your point actually is.

## Third discussion point

## Weaknesses and next steps

Weaknesses and next steps should also be included.

\newpage

# References
